if has_command jj; then
  source <(jj util completion zsh)

  function jj.fetch() {
    local cur_main=$(jj log -r 'trunk()' --limit 1 -T 'change_id' --no-graph --color never --quiet --ignore-working-copy)
    jj git fetch && jj log -r "$cur_main..trunk()"
  }
fi
